"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/conversation/[id]/page",{

/***/ "(app-pages-browser)/./src/app/components/ConversationInput-Signed.tsx":
/*!*********************************************************!*\
  !*** ./src/app/components/ConversationInput-Signed.tsx ***!
  \*********************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ ConversationInput; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @swc/helpers/_/_tagged_template_literal */ \"(app-pages-browser)/./node_modules/@swc/helpers/esm/_tagged_template_literal.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_hot_toast__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-hot-toast */ \"(app-pages-browser)/./node_modules/react-hot-toast/dist/index.mjs\");\n/* harmony import */ var react_firebase_hooks_firestore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-firebase-hooks/firestore */ \"(app-pages-browser)/./node_modules/react-firebase-hooks/firestore/dist/index.esm.js\");\n/* harmony import */ var _heroicons_react_24_solid_esm_ArrowUpIcon__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @heroicons/react/24/solid/esm/ArrowUpIcon */ \"(app-pages-browser)/./node_modules/@heroicons/react/24/solid/esm/ArrowUpIcon.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _AlfaProvider__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./AlfaProvider */ \"(app-pages-browser)/./src/app/components/AlfaProvider.tsx\");\n/* harmony import */ var _setup_firebaseClient__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../setup/firebaseClient */ \"(app-pages-browser)/./src/setup/firebaseClient.ts\");\n/* harmony import */ var _apollo_client__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @apollo/client */ \"(app-pages-browser)/./node_modules/graphql-tag/lib/index.js\");\n/* harmony import */ var _setup_apolloClient__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../setup/apolloClient */ \"(app-pages-browser)/./src/setup/apolloClient.ts\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../lib/utils */ \"(app-pages-browser)/./src/lib/utils.ts\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next-auth/react */ \"(app-pages-browser)/./node_modules/next-auth/react/index.js\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/navigation.js\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_navigation__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _setup_definitions_constants__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../setup/definitions/constants */ \"(app-pages-browser)/./src/setup/definitions/constants.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nfunction _templateObject() {\n    const data = (0,_swc_helpers_tagged_template_literal__WEBPACK_IMPORTED_MODULE_0__._)([\n        \"\\n          mutation SendPrompt($conversationId: String!, $prompt: String!, $user: String!, $isAlfa: Boolean!) {\\n            sendPrompt(conversationId: $conversationId, prompt: $prompt, user: $user, isAlfa: $isAlfa) {\\n              action\\n            }\\n          }\\n        \"\n    ]);\n    _templateObject = function() {\n        return data;\n    };\n    return data;\n}\n\nvar _s = $RefreshSig$(), _s1 = $RefreshSig$(), _s2 = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction ConversationInput(param) {\n    let { conversationId } = param;\n    var _conversationSnapshot_data, _conversationSnapshot;\n    _s();\n    const { isAlfa } = (0,_AlfaProvider__WEBPACK_IMPORTED_MODULE_6__.useAlfa)();\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const conversationRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_5__.doc)(_setup_firebaseClient__WEBPACK_IMPORTED_MODULE_7__.db, \"conversations\", conversationId);\n    const [conversationSnapshot] = (0,react_firebase_hooks_firestore__WEBPACK_IMPORTED_MODULE_4__.useDocument)(conversationRef);\n    const turnState = (_conversationSnapshot = conversationSnapshot) === null || _conversationSnapshot === void 0 ? void 0 : (_conversationSnapshot_data = _conversationSnapshot.data()) === null || _conversationSnapshot_data === void 0 ? void 0 : _conversationSnapshot_data.turnState;\n    const textareaRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const { data: session } = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_10__.useSession)();\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_11__.useRouter)();\n    async function sendMessage(content) {\n        try {\n            // Adding the message to Firestore\n            const message = {\n                timestamp: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_5__.serverTimestamp)(),\n                userId: \"Ren\\xe9\",\n                content: content\n            };\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_5__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_5__.collection)(_setup_firebaseClient__WEBPACK_IMPORTED_MODULE_7__.db, \"conversations\", conversationId, \"messages\"), message);\n        } catch (error) {\n            console.error(\"Error:\", error);\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.toast.error(\"An error occurred while sending the message.\");\n        // Optionally revert optimistic UI updates here\n        }\n    }\n    async function sendPrompt(content) {\n        const variables = {\n            conversationId,\n            prompt: content,\n            user: \"Ren\\xe9\",\n            isAlfa: isAlfa\n        };\n        // Define your GraphQL mutation\n        const SEND_PROMPT_MUTATION = (0,_apollo_client__WEBPACK_IMPORTED_MODULE_13__.gql)(_templateObject());\n        try {\n            // Execute the mutation\n            const response = await _setup_apolloClient__WEBPACK_IMPORTED_MODULE_8__.client.mutate({\n                mutation: SEND_PROMPT_MUTATION,\n                variables\n            });\n            // Check if the data property exists and is not null\n            if (response.data) {\n                const data = response.data;\n                // Check if the sendPrompt property exists and is not null\n                if (data.sendPrompt) {\n                    console.log(\"action\", data.sendPrompt.action);\n                    if (data.sendPrompt.action === _setup_definitions_constants__WEBPACK_IMPORTED_MODULE_12__.create_new_conversation) {\n                        if (session) {\n                            const newConversationId = await (0,_lib_utils__WEBPACK_IMPORTED_MODULE_9__.createNewConversation)(session, conversationId, 1);\n                            if (newConversationId) {\n                                router.push(\"/conversation/\".concat(newConversationId));\n                            }\n                        }\n                    } else if (data.sendPrompt.action === _setup_definitions_constants__WEBPACK_IMPORTED_MODULE_12__.back_to_parent) {\n                        var _conversationSnapshot_data, _conversationSnapshot;\n                        const parentId = (_conversationSnapshot = conversationSnapshot) === null || _conversationSnapshot === void 0 ? void 0 : (_conversationSnapshot_data = _conversationSnapshot.data()) === null || _conversationSnapshot_data === void 0 ? void 0 : _conversationSnapshot_data.parentId; //ATTENTION: what if parentId is \"base\"?\n                        router.push(\"/conversation/\".concat(parentId));\n                    }\n                }\n            } else {\n                // Handle the case where data is null or undefined\n                console.log(\"No data returned from server.\");\n            }\n        } catch (error) {\n            console.error(\"Error:\", error);\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.toast.error(\"An error occurred during the request.\");\n        }\n    }\n    const updateInputHeight = ()=>{\n        const textarea = textareaRef.current;\n        if (textarea) {\n            textarea.style.height = \"auto\";\n            const maxHeight = parseInt(window.getComputedStyle(textarea).maxHeight, 10);\n            // Set the textarea height, not exceeding the maxHeight\n            textarea.style.height = \"\".concat(Math.min(textarea.scrollHeight, maxHeight), \"px\");\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        updateInputHeight();\n    }, [\n        input\n    ]);\n    const handleKeyDown = (e)=>{\n        if (e.key === \"Enter\" && !e.shiftKey) {\n            e.preventDefault(); // Prevent default to stop new line in textarea\n            submissionHelper();\n        }\n    };\n    const handleSubmit = (e)=>{\n        e.preventDefault();\n        submissionHelper();\n    };\n    const submissionHelper = async ()=>{\n        const content = input.trim();\n        setInput(\"\");\n        await sendMessage(content);\n        await sendPrompt(content);\n    };\n    const renderHelper = (criterion)=>{\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"form\", {\n            onSubmit: handleSubmit,\n            className: \"flex flex-col justify-center relative rounded-lg bg-red-700/50 text-black text-sm mx-4 mb-4 p-5\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"textarea\", {\n                    ref: textareaRef,\n                    className: \"bg-transparent focus:outline-none w-full h-12 py-4 disabled:cursor-not-allowed placeholder:text-gray-300 max-h-[10em] overflow-auto resize-none pr-20\",\n                    disabled: criterion,\n                    placeholder: \"Type your message here...\",\n                    value: input,\n                    onChange: (e)=>setInput(e.target.value),\n                    onKeyDown: handleKeyDown\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\renes\\\\Documents\\\\Ren\\xe9ssance\\\\Konstruktivt Fjolleri\\\\Artificial Intelligence\\\\toolproof\\\\web_app\\\\src\\\\app\\\\components\\\\ConversationInput-Signed.tsx\",\n                    lineNumber: 141,\n                    columnNumber: 17\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"button\", {\n                    className: \"absolute right-12 bottom-6 bg-[#11A37F] hover:opacity-50 text-white font-bold px-4 py-2 rounded disabled:bg-gray-300 disabled:cursor-not-allowed\",\n                    disabled: !input,\n                    type: \"submit\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(_heroicons_react_24_solid_esm_ArrowUpIcon__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                        className: \"h-4 w-4\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\renes\\\\Documents\\\\Ren\\xe9ssance\\\\Konstruktivt Fjolleri\\\\Artificial Intelligence\\\\toolproof\\\\web_app\\\\src\\\\app\\\\components\\\\ConversationInput-Signed.tsx\",\n                        lineNumber: 155,\n                        columnNumber: 21\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\renes\\\\Documents\\\\Ren\\xe9ssance\\\\Konstruktivt Fjolleri\\\\Artificial Intelligence\\\\toolproof\\\\web_app\\\\src\\\\app\\\\components\\\\ConversationInput-Signed.tsx\",\n                    lineNumber: 150,\n                    columnNumber: 17\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\renes\\\\Documents\\\\Ren\\xe9ssance\\\\Konstruktivt Fjolleri\\\\Artificial Intelligence\\\\toolproof\\\\web_app\\\\src\\\\app\\\\components\\\\ConversationInput-Signed.tsx\",\n            lineNumber: 140,\n            columnNumber: 13\n        }, this);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"div\", {\n        children: isAlfa ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(AlfaMode, {\n            turnState: turnState,\n            textareaRef: textareaRef,\n            renderHelper: renderHelper\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\renes\\\\Documents\\\\Ren\\xe9ssance\\\\Konstruktivt Fjolleri\\\\Artificial Intelligence\\\\toolproof\\\\web_app\\\\src\\\\app\\\\components\\\\ConversationInput-Signed.tsx\",\n            lineNumber: 165,\n            columnNumber: 21\n        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(BetaMode, {\n            turnState: turnState,\n            textareaRef: textareaRef,\n            renderHelper: renderHelper\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\renes\\\\Documents\\\\Ren\\xe9ssance\\\\Konstruktivt Fjolleri\\\\Artificial Intelligence\\\\toolproof\\\\web_app\\\\src\\\\app\\\\components\\\\ConversationInput-Signed.tsx\",\n            lineNumber: 172,\n            columnNumber: 25\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\renes\\\\Documents\\\\Ren\\xe9ssance\\\\Konstruktivt Fjolleri\\\\Artificial Intelligence\\\\toolproof\\\\web_app\\\\src\\\\app\\\\components\\\\ConversationInput-Signed.tsx\",\n        lineNumber: 162,\n        columnNumber: 9\n    }, this);\n}\n_s(ConversationInput, \"JlJtJ74CfQz/uZAN9rXZmyKUYzs=\", false, function() {\n    return [\n        _AlfaProvider__WEBPACK_IMPORTED_MODULE_6__.useAlfa,\n        react_firebase_hooks_firestore__WEBPACK_IMPORTED_MODULE_4__.useDocument,\n        next_auth_react__WEBPACK_IMPORTED_MODULE_10__.useSession,\n        next_navigation__WEBPACK_IMPORTED_MODULE_11__.useRouter\n    ];\n});\n_c = ConversationInput;\nfunction AlfaMode(param) {\n    let { turnState, textareaRef, renderHelper } = param;\n    _s1();\n    const toastIdRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(undefined);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        if (turnState === -1) {\n            toastIdRef.current = react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.toast.loading(\"ChatGPT is thinking...\");\n        } else {\n            var _textareaRef_current;\n            if (toastIdRef.current) {\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.toast.dismiss(toastIdRef.current);\n            }\n            (_textareaRef_current = textareaRef.current) === null || _textareaRef_current === void 0 ? void 0 : _textareaRef_current.focus();\n        }\n        return ()=>{\n            if (toastIdRef.current) {\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.toast.dismiss(toastIdRef.current);\n            }\n        };\n    }, [\n        turnState,\n        textareaRef\n    ]); //ATTENTION: textareaRef should maybe be an effect-dependency\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, {\n        children: renderHelper(turnState === -1)\n    }, void 0, false);\n}\n_s1(AlfaMode, \"eG+q7JYR7pVIGKm7PA7BFA3LOBU=\");\n_c1 = AlfaMode;\nfunction BetaMode(param) {\n    let { turnState, renderHelper: renderHelper } = param;\n    _s2();\n    const toastIdRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(undefined);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        if (turnState > 1 || turnState < 0) {\n            if (turnState === -1) {\n                toastIdRef.current = react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.toast.loading(\"ChatGPT is thinking...\");\n            } else if (turnState === -2) {\n                toastIdRef.current = react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.toast.loading(\"ChatGPT is thinking...\");\n            } else if (turnState === 2) {\n                toastIdRef.current = react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.toast.loading(\"Waiting for your partner to respond...\");\n            }\n        } else if (toastIdRef.current) {\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.toast.dismiss(toastIdRef.current);\n        }\n        return ()=>{\n            if (toastIdRef.current) {\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.toast.dismiss(toastIdRef.current);\n            }\n        };\n    }, [\n        turnState\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, {\n        children: renderHelper(turnState > 1 || turnState < 0)\n    }, void 0, false);\n}\n_s2(BetaMode, \"eG+q7JYR7pVIGKm7PA7BFA3LOBU=\");\n_c2 = BetaMode;\nvar _c, _c1, _c2;\n$RefreshReg$(_c, \"ConversationInput\");\n$RefreshReg$(_c1, \"AlfaMode\");\n$RefreshReg$(_c2, \"BetaMode\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvY29tcG9uZW50cy9Db252ZXJzYXRpb25JbnB1dC1TaWduZWQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDb0Q7QUFDWjtBQUNxQjtBQUNMO0FBQ2lCO0FBQy9CO0FBRUQ7QUFDTztBQUVYO0FBQ2E7QUFDTTtBQUNYO0FBQ0Q7QUFDa0I7QUFNL0MsU0FBU2tCLGtCQUFrQixLQUF5QjtRQUF6QixFQUFFQyxjQUFjLEVBQVMsR0FBekI7UUFLcEJDLDRCQUFBQTs7SUFKbEIsTUFBTSxFQUFFQyxNQUFNLEVBQUUsR0FBR1gsc0RBQU9BO0lBQzFCLE1BQU0sQ0FBQ1ksT0FBT0MsU0FBUyxHQUFHdkIsK0NBQVFBLENBQUM7SUFDbkMsTUFBTXdCLGtCQUFrQmYsdURBQUdBLENBQUNFLHFEQUFFQSxFQUFFLGlCQUFpQlE7SUFDakQsTUFBTSxDQUFDQyxxQkFBcUIsR0FBR2hCLDJFQUFXQSxDQUFDb0I7SUFDM0MsTUFBTUMsYUFBWUwsd0JBQUFBLGtDQUFBQSw2Q0FBQUEsNkJBQUFBLHNCQUFzQk0sSUFBSSxnQkFBMUJOLGlEQUFBQSwyQkFBOEJLLFNBQVM7SUFDekQsTUFBTUUsY0FBY3pCLDZDQUFNQSxDQUE2QjtJQUN2RCxNQUFNLEVBQUV3QixNQUFNRSxPQUFPLEVBQUUsR0FBR2IsNERBQVVBO0lBQ3BDLE1BQU1jLFNBQVNiLDJEQUFTQTtJQUd4QixlQUFlYyxZQUFZQyxPQUFlO1FBQ3RDLElBQUk7WUFDQSxrQ0FBa0M7WUFDbEMsTUFBTUMsVUFBbUI7Z0JBQ3JCQyxXQUFXekIsbUVBQWVBO2dCQUMxQjBCLFFBQVE7Z0JBQ1JILFNBQVNBO1lBQ2I7WUFDQSxNQUFNekIsMERBQU1BLENBQUNDLDhEQUFVQSxDQUFDSSxxREFBRUEsRUFBRSxpQkFBaUJRLGdCQUFnQixhQUFhYTtRQUM5RSxFQUFFLE9BQU9HLE9BQU87WUFDWkMsUUFBUUQsS0FBSyxDQUFDLFVBQVVBO1lBQ3hCaEMsa0RBQUtBLENBQUNnQyxLQUFLLENBQUM7UUFDWiwrQ0FBK0M7UUFDbkQ7SUFDSjtJQUVBLGVBQWVFLFdBQVdOLE9BQWU7UUFFckMsTUFBTU8sWUFBb0M7WUFDdENuQjtZQUNBb0IsUUFBUVI7WUFDUlMsTUFBTTtZQUNObkIsUUFBUUE7UUFDWjtRQUVBLCtCQUErQjtRQUMvQixNQUFNb0IsdUJBQXVCN0Isb0RBQUdBO1FBUWhDLElBQUk7WUFDQSx1QkFBdUI7WUFDdkIsTUFBTThCLFdBQVcsTUFBTTdCLHVEQUFNQSxDQUFDOEIsTUFBTSxDQUFXO2dCQUMzQ0MsVUFBVUg7Z0JBQ1ZIO1lBQ0o7WUFDQSxvREFBb0Q7WUFDcEQsSUFBSUksU0FBU2hCLElBQUksRUFBRTtnQkFDZixNQUFNQSxPQUFpQmdCLFNBQVNoQixJQUFJO2dCQUNwQywwREFBMEQ7Z0JBQzFELElBQUlBLEtBQUtXLFVBQVUsRUFBRTtvQkFDakJELFFBQVFTLEdBQUcsQ0FBQyxVQUFVbkIsS0FBS1csVUFBVSxDQUFDUyxNQUFNO29CQUM1QyxJQUFJcEIsS0FBS1csVUFBVSxDQUFDUyxNQUFNLEtBQUs3QixrRkFBaUMsRUFBRTt3QkFDOUQsSUFBSVcsU0FBUzs0QkFDVCxNQUFNb0Isb0JBQW9CLE1BQU1sQyxpRUFBcUJBLENBQUNjLFNBQVNULGdCQUFnQjs0QkFDL0UsSUFBSTZCLG1CQUFtQjtnQ0FDbkJuQixPQUFPb0IsSUFBSSxDQUFDLGlCQUFtQyxPQUFsQkQ7NEJBQ2pDO3dCQUNKO29CQUNKLE9BQU8sSUFBSXRCLEtBQUtXLFVBQVUsQ0FBQ1MsTUFBTSxLQUFLN0IseUVBQXdCLEVBQUU7NEJBQzNDRyw0QkFBQUE7d0JBQWpCLE1BQU0rQixZQUFXL0Isd0JBQUFBLGtDQUFBQSw2Q0FBQUEsNkJBQUFBLHNCQUFzQk0sSUFBSSxnQkFBMUJOLGlEQUFBQSwyQkFBOEIrQixRQUFRLEVBQUUsd0NBQXdDO3dCQUNqR3RCLE9BQU9vQixJQUFJLENBQUMsaUJBQTBCLE9BQVRFO29CQUNqQztnQkFDSjtZQUNKLE9BQU87Z0JBQ0gsa0RBQWtEO2dCQUNsRGYsUUFBUVMsR0FBRyxDQUFDO1lBQ2hCO1FBQ0osRUFBRSxPQUFPVixPQUFPO1lBQ1pDLFFBQVFELEtBQUssQ0FBQyxVQUFVQTtZQUN4QmhDLGtEQUFLQSxDQUFDZ0MsS0FBSyxDQUFDO1FBQ2hCO0lBQ0o7SUFFQSxNQUFNaUIsb0JBQW9CO1FBQ3RCLE1BQU1DLFdBQVcxQixZQUFZMkIsT0FBTztRQUNwQyxJQUFJRCxVQUFVO1lBQ1ZBLFNBQVNFLEtBQUssQ0FBQ0MsTUFBTSxHQUFHO1lBQ3hCLE1BQU1DLFlBQVlDLFNBQVNDLE9BQU9DLGdCQUFnQixDQUFDUCxVQUFVSSxTQUFTLEVBQUU7WUFFeEUsdURBQXVEO1lBQ3ZESixTQUFTRSxLQUFLLENBQUNDLE1BQU0sR0FBRyxHQUE4QyxPQUEzQ0ssS0FBS0MsR0FBRyxDQUFDVCxTQUFTVSxZQUFZLEVBQUVOLFlBQVc7UUFDMUU7SUFDSjtJQUVBeEQsZ0RBQVNBLENBQUM7UUFDTm1EO0lBQ0osR0FBRztRQUFDOUI7S0FBTTtJQUVWLE1BQU0wQyxnQkFBZ0IsQ0FBQ0M7UUFDbkIsSUFBSUEsRUFBRUMsR0FBRyxLQUFLLFdBQVcsQ0FBQ0QsRUFBRUUsUUFBUSxFQUFFO1lBQ2xDRixFQUFFRyxjQUFjLElBQUksK0NBQStDO1lBQ25FQztRQUNKO0lBQ0o7SUFFQSxNQUFNQyxlQUFlLENBQUNMO1FBQ2xCQSxFQUFFRyxjQUFjO1FBQ2hCQztJQUNKO0lBR0EsTUFBTUEsbUJBQW1CO1FBQ3JCLE1BQU10QyxVQUFVVCxNQUFNaUQsSUFBSTtRQUMxQmhELFNBQVM7UUFDVCxNQUFNTyxZQUFZQztRQUNsQixNQUFNTSxXQUFXTjtJQUNyQjtJQUdBLE1BQU15QyxlQUFlLENBQUNDO1FBQ2xCLHFCQUNJLDhEQUFDQztZQUFLQyxVQUFVTDtZQUFjTSxXQUFVOzs4QkFDcEMsOERBQUN2QjtvQkFDR3dCLEtBQUtsRDtvQkFDTGlELFdBQVU7b0JBQ1ZFLFVBQVVMO29CQUNWTSxhQUFZO29CQUNaQyxPQUFPMUQ7b0JBQ1AyRCxVQUFVLENBQUNoQixJQUFNMUMsU0FBUzBDLEVBQUVpQixNQUFNLENBQUNGLEtBQUs7b0JBQ3hDRyxXQUFXbkI7Ozs7Ozs4QkFFZiw4REFBQ29CO29CQUNHUixXQUFVO29CQUNWRSxVQUFVLENBQUN4RDtvQkFDWCtELE1BQUs7OEJBRUwsNEVBQUNoRixrRkFBV0E7d0JBQUN1RSxXQUFVOzs7Ozs7Ozs7Ozs7Ozs7OztJQUl2QztJQUVBLHFCQUNJLDhEQUFDVTtrQkFFT2pFLHVCQUNJLDhEQUFDa0U7WUFDRzlELFdBQVdBO1lBQ1hFLGFBQWFBO1lBQ2I2QyxjQUFjQTs7Ozs7aUNBSWQsOERBQUNnQjtZQUNHL0QsV0FBV0E7WUFDWEUsYUFBYUE7WUFDYjZDLGNBQWNBOzs7Ozs7Ozs7OztBQU0xQztHQTlKd0J0RDs7UUFDRFIsa0RBQU9BO1FBR0tOLHVFQUFXQTtRQUdoQlcsd0RBQVVBO1FBQ3JCQyx1REFBU0E7OztLQVJKRTtBQXdLeEIsU0FBU3FFLFNBQVMsS0FBa0Q7UUFBbEQsRUFBRTlELFNBQVMsRUFBRUUsV0FBVyxFQUFFNkMsWUFBWSxFQUFZLEdBQWxEOztJQUNkLE1BQU1pQixhQUFhdkYsNkNBQU1BLENBQXFCd0Y7SUFFOUN6RixnREFBU0EsQ0FBQztRQUNOLElBQUl3QixjQUFjLENBQUMsR0FBRztZQUNsQmdFLFdBQVduQyxPQUFPLEdBQUduRCxrREFBS0EsQ0FBQ3dGLE9BQU8sQ0FBQztRQUN2QyxPQUFPO2dCQUlIaEU7WUFIQSxJQUFJOEQsV0FBV25DLE9BQU8sRUFBRTtnQkFDcEJuRCxrREFBS0EsQ0FBQ3lGLE9BQU8sQ0FBQ0gsV0FBV25DLE9BQU87WUFDcEM7YUFDQTNCLHVCQUFBQSxZQUFZMkIsT0FBTyxjQUFuQjNCLDJDQUFBQSxxQkFBcUJrRSxLQUFLO1FBQzlCO1FBQ0EsT0FBTztZQUNILElBQUlKLFdBQVduQyxPQUFPLEVBQUU7Z0JBQ3BCbkQsa0RBQUtBLENBQUN5RixPQUFPLENBQUNILFdBQVduQyxPQUFPO1lBQ3BDO1FBQ0o7SUFDSixHQUFHO1FBQUM3QjtRQUFXRTtLQUFZLEdBQUcsNkRBQTZEO0lBRTNGLHFCQUNJO2tCQUNLNkMsYUFBYS9DLGNBQWMsQ0FBQzs7QUFHekM7SUF4QlM4RDtNQUFBQTtBQTJCVCxTQUFTQyxTQUFTLEtBQW9EO1FBQXBELEVBQUUvRCxTQUFTLEVBQUUrQyxjQUFjQSxZQUFZLEVBQWEsR0FBcEQ7O0lBQ2QsTUFBTWlCLGFBQWF2Riw2Q0FBTUEsQ0FBcUJ3RjtJQUU5Q3pGLGdEQUFTQSxDQUFDO1FBQ04sSUFBSXdCLFlBQVksS0FBS0EsWUFBWSxHQUFHO1lBQ2hDLElBQUlBLGNBQWMsQ0FBQyxHQUFHO2dCQUNsQmdFLFdBQVduQyxPQUFPLEdBQUduRCxrREFBS0EsQ0FBQ3dGLE9BQU8sQ0FBQztZQUN2QyxPQUFPLElBQUlsRSxjQUFjLENBQUMsR0FBRztnQkFDekJnRSxXQUFXbkMsT0FBTyxHQUFHbkQsa0RBQUtBLENBQUN3RixPQUFPLENBQUM7WUFDdkMsT0FBTyxJQUFJbEUsY0FBYyxHQUFHO2dCQUN4QmdFLFdBQVduQyxPQUFPLEdBQUduRCxrREFBS0EsQ0FBQ3dGLE9BQU8sQ0FBQztZQUN2QztRQUNKLE9BQU8sSUFBSUYsV0FBV25DLE9BQU8sRUFBRTtZQUMzQm5ELGtEQUFLQSxDQUFDeUYsT0FBTyxDQUFDSCxXQUFXbkMsT0FBTztRQUNwQztRQUVBLE9BQU87WUFDSCxJQUFJbUMsV0FBV25DLE9BQU8sRUFBRTtnQkFDcEJuRCxrREFBS0EsQ0FBQ3lGLE9BQU8sQ0FBQ0gsV0FBV25DLE9BQU87WUFDcEM7UUFDSjtJQUNKLEdBQUc7UUFBQzdCO0tBQVU7SUFFZCxxQkFDSTtrQkFDSytDLGFBQWEvQyxZQUFZLEtBQUtBLFlBQVk7O0FBR3ZEO0lBNUJTK0Q7TUFBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2FwcC9jb21wb25lbnRzL0NvbnZlcnNhdGlvbklucHV0LVNpZ25lZC50c3g/NDRmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIlxyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHsgdG9hc3QgfSBmcm9tIFwicmVhY3QtaG90LXRvYXN0XCI7XHJcbmltcG9ydCB7IHVzZURvY3VtZW50IH0gZnJvbSBcInJlYWN0LWZpcmViYXNlLWhvb2tzL2ZpcmVzdG9yZVwiO1xyXG5pbXBvcnQgeyBBcnJvd1VwSWNvbiB9IGZyb20gXCJAaGVyb2ljb25zL3JlYWN0LzI0L3NvbGlkXCI7XHJcbmltcG9ydCB7IGFkZERvYywgY29sbGVjdGlvbiwgc2VydmVyVGltZXN0YW1wIH0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xyXG5pbXBvcnQgeyBkb2MsIH0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xyXG5pbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSBcIi4uLy4uL3NldHVwL2RlZmluaXRpb25zL3R5cGluZ3NcIjtcclxuaW1wb3J0IHsgdXNlQWxmYSB9IGZyb20gXCIuL0FsZmFQcm92aWRlclwiO1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gXCIuLi8uLi9zZXR1cC9maXJlYmFzZUNsaWVudFwiO1xyXG5pbXBvcnQgeyBNdXRhdGlvblNlbmRQcm9tcHRBcmdzLCBNdXRhdGlvbiB9IGZyb20gXCIuLi8uLi9zZXR1cC9nZW5lcmF0ZWQvdHlwZXNDbGllbnRcIjtcclxuaW1wb3J0IHsgZ3FsIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50XCI7XHJcbmltcG9ydCB7IGNsaWVudCB9IGZyb20gXCIuLi8uLi9zZXR1cC9hcG9sbG9DbGllbnRcIjtcclxuaW1wb3J0IHsgY3JlYXRlTmV3Q29udmVyc2F0aW9uIH0gZnJvbSBcIi4uLy4uL2xpYi91dGlsc1wiO1xyXG5pbXBvcnQgeyB1c2VTZXNzaW9uIH0gZnJvbSBcIm5leHQtYXV0aC9yZWFjdFwiO1xyXG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tIFwibmV4dC9uYXZpZ2F0aW9uXCI7XHJcbmltcG9ydCAqIGFzIENvbnN0YW50cyBmcm9tIFwiLi4vLi4vc2V0dXAvZGVmaW5pdGlvbnMvY29uc3RhbnRzXCJcclxuXHJcbnR5cGUgUHJvcHMgPSB7XHJcbiAgICBjb252ZXJzYXRpb25JZDogc3RyaW5nO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ29udmVyc2F0aW9uSW5wdXQoeyBjb252ZXJzYXRpb25JZCB9OiBQcm9wcykge1xyXG4gICAgY29uc3QgeyBpc0FsZmEgfSA9IHVzZUFsZmEoKTtcclxuICAgIGNvbnN0IFtpbnB1dCwgc2V0SW5wdXRdID0gdXNlU3RhdGUoXCJcIik7XHJcbiAgICBjb25zdCBjb252ZXJzYXRpb25SZWYgPSBkb2MoZGIsIFwiY29udmVyc2F0aW9uc1wiLCBjb252ZXJzYXRpb25JZCk7XHJcbiAgICBjb25zdCBbY29udmVyc2F0aW9uU25hcHNob3RdID0gdXNlRG9jdW1lbnQoY29udmVyc2F0aW9uUmVmKTtcclxuICAgIGNvbnN0IHR1cm5TdGF0ZSA9IGNvbnZlcnNhdGlvblNuYXBzaG90Py5kYXRhKCk/LnR1cm5TdGF0ZTtcclxuICAgIGNvbnN0IHRleHRhcmVhUmVmID0gdXNlUmVmPEhUTUxUZXh0QXJlYUVsZW1lbnQgfCBudWxsPihudWxsKTtcclxuICAgIGNvbnN0IHsgZGF0YTogc2Vzc2lvbiB9ID0gdXNlU2Vzc2lvbigpO1xyXG4gICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XHJcblxyXG5cclxuICAgIGFzeW5jIGZ1bmN0aW9uIHNlbmRNZXNzYWdlKGNvbnRlbnQ6IHN0cmluZykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIEFkZGluZyB0aGUgbWVzc2FnZSB0byBGaXJlc3RvcmVcclxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZTogTWVzc2FnZSA9IHtcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogc2VydmVyVGltZXN0YW1wKCksXHJcbiAgICAgICAgICAgICAgICB1c2VySWQ6IFwiUmVuw6lcIixcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGF3YWl0IGFkZERvYyhjb2xsZWN0aW9uKGRiLCBcImNvbnZlcnNhdGlvbnNcIiwgY29udmVyc2F0aW9uSWQsIFwibWVzc2FnZXNcIiksIG1lc3NhZ2UpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgICB0b2FzdC5lcnJvcihcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHNlbmRpbmcgdGhlIG1lc3NhZ2UuXCIpO1xyXG4gICAgICAgICAgICAvLyBPcHRpb25hbGx5IHJldmVydCBvcHRpbWlzdGljIFVJIHVwZGF0ZXMgaGVyZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBmdW5jdGlvbiBzZW5kUHJvbXB0KGNvbnRlbnQ6IHN0cmluZykge1xyXG5cclxuICAgICAgICBjb25zdCB2YXJpYWJsZXM6IE11dGF0aW9uU2VuZFByb21wdEFyZ3MgPSB7XHJcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkLFxyXG4gICAgICAgICAgICBwcm9tcHQ6IGNvbnRlbnQsXHJcbiAgICAgICAgICAgIHVzZXI6IFwiUmVuw6lcIixcclxuICAgICAgICAgICAgaXNBbGZhOiBpc0FsZmEsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gRGVmaW5lIHlvdXIgR3JhcGhRTCBtdXRhdGlvblxyXG4gICAgICAgIGNvbnN0IFNFTkRfUFJPTVBUX01VVEFUSU9OID0gZ3FsYFxyXG4gICAgICAgICAgbXV0YXRpb24gU2VuZFByb21wdCgkY29udmVyc2F0aW9uSWQ6IFN0cmluZyEsICRwcm9tcHQ6IFN0cmluZyEsICR1c2VyOiBTdHJpbmchLCAkaXNBbGZhOiBCb29sZWFuISkge1xyXG4gICAgICAgICAgICBzZW5kUHJvbXB0KGNvbnZlcnNhdGlvbklkOiAkY29udmVyc2F0aW9uSWQsIHByb21wdDogJHByb21wdCwgdXNlcjogJHVzZXIsIGlzQWxmYTogJGlzQWxmYSkge1xyXG4gICAgICAgICAgICAgIGFjdGlvblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gRXhlY3V0ZSB0aGUgbXV0YXRpb25cclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQubXV0YXRlPE11dGF0aW9uPih7XHJcbiAgICAgICAgICAgICAgICBtdXRhdGlvbjogU0VORF9QUk9NUFRfTVVUQVRJT04sXHJcbiAgICAgICAgICAgICAgICB2YXJpYWJsZXMsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgZGF0YSBwcm9wZXJ0eSBleGlzdHMgYW5kIGlzIG5vdCBudWxsXHJcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhOiBNdXRhdGlvbiA9IHJlc3BvbnNlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VuZFByb21wdCBwcm9wZXJ0eSBleGlzdHMgYW5kIGlzIG5vdCBudWxsXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zZW5kUHJvbXB0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJhY3Rpb25cIiwgZGF0YS5zZW5kUHJvbXB0LmFjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc2VuZFByb21wdC5hY3Rpb24gPT09IENvbnN0YW50cy5jcmVhdGVfbmV3X2NvbnZlcnNhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Q29udmVyc2F0aW9uSWQgPSBhd2FpdCBjcmVhdGVOZXdDb252ZXJzYXRpb24oc2Vzc2lvbiwgY29udmVyc2F0aW9uSWQsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0NvbnZlcnNhdGlvbklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyLnB1c2goYC9jb252ZXJzYXRpb24vJHtuZXdDb252ZXJzYXRpb25JZH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5zZW5kUHJvbXB0LmFjdGlvbiA9PT0gQ29uc3RhbnRzLmJhY2tfdG9fcGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudElkID0gY29udmVyc2F0aW9uU25hcHNob3Q/LmRhdGEoKT8ucGFyZW50SWQ7IC8vQVRURU5USU9OOiB3aGF0IGlmIHBhcmVudElkIGlzIFwiYmFzZVwiP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaChgL2NvbnZlcnNhdGlvbi8ke3BhcmVudElkfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSB0aGUgY2FzZSB3aGVyZSBkYXRhIGlzIG51bGwgb3IgdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vIGRhdGEgcmV0dXJuZWQgZnJvbSBzZXJ2ZXIuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRvYXN0LmVycm9yKFwiQW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHRoZSByZXF1ZXN0LlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXBkYXRlSW5wdXRIZWlnaHQgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdGV4dGFyZWEgPSB0ZXh0YXJlYVJlZi5jdXJyZW50O1xyXG4gICAgICAgIGlmICh0ZXh0YXJlYSkge1xyXG4gICAgICAgICAgICB0ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSBcImF1dG9cIjtcclxuICAgICAgICAgICAgY29uc3QgbWF4SGVpZ2h0ID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGV4dGFyZWEpLm1heEhlaWdodCwgMTApO1xyXG5cclxuICAgICAgICAgICAgLy8gU2V0IHRoZSB0ZXh0YXJlYSBoZWlnaHQsIG5vdCBleGNlZWRpbmcgdGhlIG1heEhlaWdodFxyXG4gICAgICAgICAgICB0ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSBgJHtNYXRoLm1pbih0ZXh0YXJlYS5zY3JvbGxIZWlnaHQsIG1heEhlaWdodCl9cHhgO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICB1cGRhdGVJbnB1dEhlaWdodCgpO1xyXG4gICAgfSwgW2lucHV0XSk7XHJcblxyXG4gICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlOiBSZWFjdC5LZXlib2FyZEV2ZW50PEhUTUxUZXh0QXJlYUVsZW1lbnQ+KSA9PiB7XHJcbiAgICAgICAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIgJiYgIWUuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IGRlZmF1bHQgdG8gc3RvcCBuZXcgbGluZSBpbiB0ZXh0YXJlYVxyXG4gICAgICAgICAgICBzdWJtaXNzaW9uSGVscGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBoYW5kbGVTdWJtaXQgPSAoZTogUmVhY3QuRm9ybUV2ZW50PEhUTUxGb3JtRWxlbWVudD4pID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgc3VibWlzc2lvbkhlbHBlcigpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBjb25zdCBzdWJtaXNzaW9uSGVscGVyID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBpbnB1dC50cmltKCk7XHJcbiAgICAgICAgc2V0SW5wdXQoXCJcIik7XHJcbiAgICAgICAgYXdhaXQgc2VuZE1lc3NhZ2UoY29udGVudCk7XHJcbiAgICAgICAgYXdhaXQgc2VuZFByb21wdChjb250ZW50KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgY29uc3QgcmVuZGVySGVscGVyID0gKGNyaXRlcmlvbjogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wganVzdGlmeS1jZW50ZXIgcmVsYXRpdmUgcm91bmRlZC1sZyBiZy1yZWQtNzAwLzUwIHRleHQtYmxhY2sgdGV4dC1zbSBteC00IG1iLTQgcC01XCI+XHJcbiAgICAgICAgICAgICAgICA8dGV4dGFyZWFcclxuICAgICAgICAgICAgICAgICAgICByZWY9e3RleHRhcmVhUmVmfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLXRyYW5zcGFyZW50IGZvY3VzOm91dGxpbmUtbm9uZSB3LWZ1bGwgaC0xMiBweS00IGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZCBwbGFjZWhvbGRlcjp0ZXh0LWdyYXktMzAwIG1heC1oLVsxMGVtXSBvdmVyZmxvdy1hdXRvIHJlc2l6ZS1ub25lIHByLTIwXCJcclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17Y3JpdGVyaW9ufVxyXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVHlwZSB5b3VyIG1lc3NhZ2UgaGVyZS4uLlwiXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2lucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0SW5wdXQoZS50YXJnZXQudmFsdWUpfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bj17aGFuZGxlS2V5RG93bn1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgcmlnaHQtMTIgYm90dG9tLTYgYmctWyMxMUEzN0ZdIGhvdmVyOm9wYWNpdHktNTAgdGV4dC13aGl0ZSBmb250LWJvbGQgcHgtNCBweS0yIHJvdW5kZWQgZGlzYWJsZWQ6YmctZ3JheS0zMDAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkXCJcclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IWlucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxBcnJvd1VwSWNvbiBjbGFzc05hbWU9XCJoLTQgdy00XCIgLz5cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaXNBbGZhID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxBbGZhTW9kZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0dXJuU3RhdGU9e3R1cm5TdGF0ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGFyZWFSZWY9e3RleHRhcmVhUmVmfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJIZWxwZXI9e3JlbmRlckhlbHBlcn1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8QmV0YU1vZGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR1cm5TdGF0ZT17dHVyblN0YXRlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGFyZWFSZWY9e3RleHRhcmVhUmVmfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVySGVscGVyPXtyZW5kZXJIZWxwZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG59XHJcblxyXG5cclxudHlwZSBNb2RlUHJvcHMgPSB7XHJcbiAgICB0dXJuU3RhdGU6IG51bWJlcjtcclxuICAgIHRleHRhcmVhUmVmOiBSZWFjdC5SZWZPYmplY3Q8SFRNTFRleHRBcmVhRWxlbWVudD47XHJcbiAgICByZW5kZXJIZWxwZXI6IChjcml0ZXJpb246IGJvb2xlYW4pID0+IEpTWC5FbGVtZW50O1xyXG59O1xyXG5cclxuXHJcbmZ1bmN0aW9uIEFsZmFNb2RlKHsgdHVyblN0YXRlLCB0ZXh0YXJlYVJlZiwgcmVuZGVySGVscGVyfTogTW9kZVByb3BzKSB7XHJcbiAgICBjb25zdCB0b2FzdElkUmVmID0gdXNlUmVmPHN0cmluZyB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcclxuXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGlmICh0dXJuU3RhdGUgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHRvYXN0SWRSZWYuY3VycmVudCA9IHRvYXN0LmxvYWRpbmcoXCJDaGF0R1BUIGlzIHRoaW5raW5nLi4uXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0b2FzdElkUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHRvYXN0LmRpc21pc3ModG9hc3RJZFJlZi5jdXJyZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0ZXh0YXJlYVJlZi5jdXJyZW50Py5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodG9hc3RJZFJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0b2FzdC5kaXNtaXNzKHRvYXN0SWRSZWYuY3VycmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSwgW3R1cm5TdGF0ZSwgdGV4dGFyZWFSZWZdKTsgLy9BVFRFTlRJT046IHRleHRhcmVhUmVmIHNob3VsZCBtYXliZSBiZSBhbiBlZmZlY3QtZGVwZW5kZW5jeVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPD5cclxuICAgICAgICAgICAge3JlbmRlckhlbHBlcih0dXJuU3RhdGUgPT09IC0xKX1cclxuICAgICAgICA8Lz5cclxuICAgICk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBCZXRhTW9kZSh7IHR1cm5TdGF0ZSwgcmVuZGVySGVscGVyOiByZW5kZXJIZWxwZXIgfTogTW9kZVByb3BzKSB7XHJcbiAgICBjb25zdCB0b2FzdElkUmVmID0gdXNlUmVmPHN0cmluZyB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcclxuXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGlmICh0dXJuU3RhdGUgPiAxIHx8IHR1cm5TdGF0ZSA8IDApIHtcclxuICAgICAgICAgICAgaWYgKHR1cm5TdGF0ZSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHRvYXN0SWRSZWYuY3VycmVudCA9IHRvYXN0LmxvYWRpbmcoXCJDaGF0R1BUIGlzIHRoaW5raW5nLi4uXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR1cm5TdGF0ZSA9PT0gLTIpIHtcclxuICAgICAgICAgICAgICAgIHRvYXN0SWRSZWYuY3VycmVudCA9IHRvYXN0LmxvYWRpbmcoXCJDaGF0R1BUIGlzIHRoaW5raW5nLi4uXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR1cm5TdGF0ZSA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgdG9hc3RJZFJlZi5jdXJyZW50ID0gdG9hc3QubG9hZGluZyhcIldhaXRpbmcgZm9yIHlvdXIgcGFydG5lciB0byByZXNwb25kLi4uXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh0b2FzdElkUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgdG9hc3QuZGlzbWlzcyh0b2FzdElkUmVmLmN1cnJlbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRvYXN0SWRSZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgdG9hc3QuZGlzbWlzcyh0b2FzdElkUmVmLmN1cnJlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFt0dXJuU3RhdGVdKTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDw+XHJcbiAgICAgICAgICAgIHtyZW5kZXJIZWxwZXIodHVyblN0YXRlID4gMSB8fCB0dXJuU3RhdGUgPCAwKX1cclxuICAgICAgICA8Lz5cclxuICAgICk7XHJcbn1cclxuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwidG9hc3QiLCJ1c2VEb2N1bWVudCIsIkFycm93VXBJY29uIiwiYWRkRG9jIiwiY29sbGVjdGlvbiIsInNlcnZlclRpbWVzdGFtcCIsImRvYyIsInVzZUFsZmEiLCJkYiIsImdxbCIsImNsaWVudCIsImNyZWF0ZU5ld0NvbnZlcnNhdGlvbiIsInVzZVNlc3Npb24iLCJ1c2VSb3V0ZXIiLCJDb25zdGFudHMiLCJDb252ZXJzYXRpb25JbnB1dCIsImNvbnZlcnNhdGlvbklkIiwiY29udmVyc2F0aW9uU25hcHNob3QiLCJpc0FsZmEiLCJpbnB1dCIsInNldElucHV0IiwiY29udmVyc2F0aW9uUmVmIiwidHVyblN0YXRlIiwiZGF0YSIsInRleHRhcmVhUmVmIiwic2Vzc2lvbiIsInJvdXRlciIsInNlbmRNZXNzYWdlIiwiY29udGVudCIsIm1lc3NhZ2UiLCJ0aW1lc3RhbXAiLCJ1c2VySWQiLCJlcnJvciIsImNvbnNvbGUiLCJzZW5kUHJvbXB0IiwidmFyaWFibGVzIiwicHJvbXB0IiwidXNlciIsIlNFTkRfUFJPTVBUX01VVEFUSU9OIiwicmVzcG9uc2UiLCJtdXRhdGUiLCJtdXRhdGlvbiIsImxvZyIsImFjdGlvbiIsImNyZWF0ZV9uZXdfY29udmVyc2F0aW9uIiwibmV3Q29udmVyc2F0aW9uSWQiLCJwdXNoIiwiYmFja190b19wYXJlbnQiLCJwYXJlbnRJZCIsInVwZGF0ZUlucHV0SGVpZ2h0IiwidGV4dGFyZWEiLCJjdXJyZW50Iiwic3R5bGUiLCJoZWlnaHQiLCJtYXhIZWlnaHQiLCJwYXJzZUludCIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCJNYXRoIiwibWluIiwic2Nyb2xsSGVpZ2h0IiwiaGFuZGxlS2V5RG93biIsImUiLCJrZXkiLCJzaGlmdEtleSIsInByZXZlbnREZWZhdWx0Iiwic3VibWlzc2lvbkhlbHBlciIsImhhbmRsZVN1Ym1pdCIsInRyaW0iLCJyZW5kZXJIZWxwZXIiLCJjcml0ZXJpb24iLCJmb3JtIiwib25TdWJtaXQiLCJjbGFzc05hbWUiLCJyZWYiLCJkaXNhYmxlZCIsInBsYWNlaG9sZGVyIiwidmFsdWUiLCJvbkNoYW5nZSIsInRhcmdldCIsIm9uS2V5RG93biIsImJ1dHRvbiIsInR5cGUiLCJkaXYiLCJBbGZhTW9kZSIsIkJldGFNb2RlIiwidG9hc3RJZFJlZiIsInVuZGVmaW5lZCIsImxvYWRpbmciLCJkaXNtaXNzIiwiZm9jdXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/components/ConversationInput-Signed.tsx\n"));

/***/ })

});